<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>Login - Home Page</title>
      <link rel="stylesheet" href="style.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
      <script src="script.js" defer></script>
   </head>
   <body>
      <div class="bg-img">
         <div class="content">
            <header>Login Form</header>
            <form id="loginForm">
               <div class="field">
                  <span class="fa fa-user"></span>
                  <input type="text" id="loginEmail" required placeholder="Email or Phone">
               </div>
               <div class="field space">
                  <span class="fa fa-lock"></span>
                  <input type="password" id="loginPassword" class="pass-key" required placeholder="Password">
                  <span class="show" id="togglePassword">SHOW</span>
               </div>
               <div class="pass">
                  <a href="#">Forgot Password?</a>
               </div>
               <div class="field">
                  <input type="submit" id="loginButton" value="LOGIN">
               </div>
               <p id="loginError" class="error-message"></p>
            </form>
            <div class="login">
               Or login with
            </div>
            <div class="links">
               <div class="facebook">
                  <i class="fab fa-facebook-f"><span>Facebook</span></i>
               </div>
               <div class="instagram">
                  <i class="fab fa-instagram"><span>Instagram</span></i>
               </div>
            </div>
            <div class="signup">
               Don't have an account?
               <a href="#">Signup Now</a>
            </div>
         </div>
      </div>

      <script>
         // Password visibility toggle
         const passField = document.querySelector('.pass-key');
         const showBtn = document.getElementById('togglePassword');
         showBtn.addEventListener('click', function () {
            if (passField.type === "password") {
               passField.type = "text";
               showBtn.textContent = "HIDE";
               showBtn.style.color = "#3498db";
            } else {
               passField.type = "password";
               showBtn.textContent = "SHOW";
               showBtn.style.color = "#222";
            }
         });

         // Login form submission handling
         document.addEventListener('DOMContentLoaded', () => {
            const loginForm = document.getElementById('loginForm');
            const emailInput = document.getElementById('loginEmail');
            const passwordInput = document.getElementById('loginPassword');
            const loginError = document.getElementById('loginError');

            if (loginForm) {
               loginForm.addEventListener('submit', (event) => {
                  event.preventDefault(); // Prevent default form submission

                  const email = emailInput.value.trim();
                  const password = passwordInput.value.trim();

                  if (!email || !password) {
                     loginError.textContent = 'Please fill out both the email and password fields.';
                     return;
                  }

                  // Firebase Authentication for Login
                  signInWithEmailAndPassword(auth, email, password)
                     .then((userCredential) => {
                        const user = userCredential.user;
                        console.log("Login successful:", user.email);
                        alert("Login successful! Redirecting...");
                        // Redirect to another page (e.g., dashboard.html)
                        window.location.href = 'dashboard.html';
                     })
                     .catch((error) => {
                        console.error("Login error:", error);
                        loginError.textContent = `Login Failed: ${getFriendlyAuthError(error)}`;
                     });
               });
            }
         });
      </script>
   </body>
</html>
